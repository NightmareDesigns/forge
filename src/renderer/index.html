<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' http://localhost:*; script-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:">
  <title>Nightmare Designs SVG Forge v0.1.0 - Professional SVG Design & Cutting Software</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="logo.css">
  <link href="https://fonts.googleapis.com/css2?family=Creepster&display=swap" rel="stylesheet">
</head>
<body>
  <div id="app">
    <!-- Logo Header -->
    <header id="app-header">
      <a href="https://www.nightmaredesigns.org/" target="_blank" class="logo-link" title="Visit Nightmare Designs">
        <img src="../../assets/icons/grim-reaper-logo.png" class="grim-reaper-logo" title="Nightmare Designs" />
      </a>
      <div class="logo-container logo-compact">
        <span class="nightmare-logo glow">Nightmare Designs SVG Forge</span>
        <span class="software-version">v0.1.0</span>
        <div class="blood-drips">
          <div class="drip"></div>
          <div class="drip"></div>
          <div class="drip"></div>
          <div class="drip"></div>
          <div class="drip"></div>
          <div class="drip"></div>
          <div class="drip"></div>
          <div class="drip"></div>
          <div class="drip"></div>
        </div>
      </div>
      <div class="header-spacer"></div>
      <button id="toggle-right-panel" class="tool-btn" title="Properties" style="margin-right:8px">‚ò∞</button>
      <a href="https://nightmaredesigns.org" target="_blank" class="header-link">nightmaredesigns.org</a>
    </header>

    <!-- Gallery Full Page Modal -->
    <div id="gallery-modal" class="gallery-modal" style="display: none;">
      <div class="gallery-modal-content">
        <button id="gallery-modal-close" class="gallery-modal-close">‚úï</button>
        <div id="gallery-modal-grid" class="gallery-modal-grid"></div>
      </div>
    </div>

    <!-- Video Chat Modal -->
    <div id="video-chat-modal" class="video-chat-modal" style="display: none;">
      <div class="video-chat-content">
        <div class="video-chat-header">
          <h2>üé• AI Video Chat</h2>
          <button id="video-chat-close" class="video-chat-close">‚úï</button>
        </div>
        <div class="video-chat-container">
          <div class="video-panels">
            <div class="video-panel ai-video">
              <video id="ai-avatar-video" autoplay muted loop playsinline></video>
              <canvas id="ai-avatar-canvas"></canvas>
              <div class="video-label">AI Assistant</div>
              <div id="ai-speaking-indicator" class="speaking-indicator" style="display: none;">
                <span class="speaking-dot"></span> Speaking...
              </div>
            </div>
            <div class="video-panel user-video">
              <video id="user-camera-video" autoplay muted playsinline></video>
              <div class="video-label">You</div>
              <div id="user-mic-indicator" class="mic-indicator">
                <span class="mic-icon">üé§</span>
              </div>
            </div>
          </div>
          <div class="video-chat-transcript">
            <h3>Conversation</h3>
            <div id="video-chat-messages" class="video-chat-messages"></div>
          </div>
        </div>
        <div class="video-chat-controls">
          <button id="toggle-camera-btn" class="control-btn" title="Toggle Camera">
            <span>üìπ</span> Camera
          </button>
          <button id="toggle-mic-btn" class="control-btn active" title="Toggle Microphone">
            <span>üé§</span> Microphone
          </button>
          <button id="end-call-btn" class="control-btn end-call" title="End Call">
            <span>üìû</span> End Call
          </button>
        </div>
      </div>
    </div>

    <!-- Left Toolbar (Scrollable) -->
    <aside id="toolbar">
      <div class="tool-group">
        <button class="tool-btn" id="toggle-panel" title="Drawing Tools & Options">
          <span class="icon">üõ†</span>
        </button>
      </div>
      <div class="tool-group">
        <button class="tool-btn active" data-tool="select" title="Select (V)">
          <span class="icon">‚¨ö</span>
        </button>
        <button class="tool-btn" data-tool="node" title="Node Editor (A)">
          <span class="icon">‚óà</span>
        </button>
      </div>

      <div class="tool-group">
        <button class="tool-btn" data-tool="pen" title="Pen Tool (P)">
          <span class="icon">‚úí</span>
        </button>
        <button class="tool-btn" data-tool="freehand" title="Freehand (F)">
          <span class="icon">‚úè</span>
        </button>
        <button class="tool-btn" data-tool="eraser" title="Eraser (E)">
          <span class="icon">üßπ</span>
        </button>
      </div>

      <div class="tool-group">
        <button class="tool-btn" data-tool="text" title="Text (T)">
          <span class="icon">T</span>
        </button>
        <button class="tool-btn" data-tool="image" title="Upload Image">
          <span class="icon">üñº</span>
        </button>
      </div>

      <div class="tool-group">
        <button class="tool-btn" data-tool="trace" title="Image Trace">
          <span class="icon">‚ä°</span>
        </button>
        <button class="tool-btn" data-tool="color-vector" title="Color Vector - Click color to trace">
          <span class="icon">üéØ</span>
        </button>
        <button class="tool-btn" data-tool="color-picker" title="Color Picker (X)">
          <span class="icon">üé®</span>
        </button>
      </div>
    </aside>

    <!-- Slide-Out Tool Panel -->
    <div id="tool-panel" class="tool-panel">
      <div class="panel-header">
        <h3>Tools & AI</h3>
        <button id="close-panel" class="close-btn">√ó</button>
      </div>
      <div class="panel-content">
        <!-- Image Import Section -->
        <div class="panel-section">
          <h4>Import & Trace</h4>
          <div class="tool-row">
            <button id="import-image-btn" class="tool-btn-panel" style="width: 100%">üìÅ Import Image</button>
          </div>
          <div class="tool-row">
            <button id="trace-image-btn" class="tool-btn-panel" style="width: 100%">‚ú® Trace to SVG</button>
          </div>
          <input type="file" id="image-input" accept="image/*" style="display: none;">
        </div>

        <div class="tool-divider"></div>

        <!-- Drawing Tools Section -->
        <div class="panel-section">
          <h4>Drawing Tools</h4>
          <div class="tool-row">
            <label>Brush Size</label>
            <input type="range" id="brush-size" min="1" max="20" value="3">
            <span id="brush-size-val">3</span>
          </div>
          <div class="tool-row">
            <label>Brush Opacity</label>
            <input type="range" id="brush-opacity" min="0.1" max="1" step="0.1" value="1">
            <span id="brush-opacity-val">100%</span>
          </div>
          <div class="tool-row">
            <label>Eraser Size</label>
            <input type="range" id="eraser-size" min="5" max="50" value="10">
            <span id="eraser-size-val">10</span>
          </div>
          <div class="tool-row">
            <button class="tool-quick" data-tool="brush">Brush</button>
          </div>
          <div class="tool-row">
            <button class="tool-quick" data-tool="marker">Marker</button>
          </div>
          <div class="tool-row">
            <button class="tool-quick" data-tool="eraser">Eraser</button>
          </div>
          <div class="tool-row">
            <button class="tool-quick" data-tool="pen">Pen</button>
          </div>
          <div class="tool-row">
            <button class="tool-quick" data-tool="color-picker">Color Picker</button>
          </div>
        </div>

        <div class="tool-divider"></div>

        <!-- AI Search Section -->
        <div class="panel-section">
          <h4>SVG Search</h4>
          <div class="tool-row">
            <input type="text" id="ai-search-input" placeholder="Search SVG designs..." class="ai-input">
          </div>
          <div class="tool-row">
            <button id="ai-search-btn" class="tool-btn-panel" style="width: 100%">üîç Search</button>
          </div>
          <div id="ai-status" class="ai-status" style="display: none;"></div>
          <div id="ai-results" class="ai-results" style="display: none;"></div>
        </div>

        <div class="tool-divider"></div>

        <!-- Saved SVG Files Section -->
        <div class="panel-section">
          <h4>Saved SVG Files</h4>
          <div id="saved-svgs" class="svg-gallery" style="margin-bottom: 8px;"></div>
          <button id="load-svgs-btn" class="tool-btn-panel" style="width: 100%">üìÇ Load SVG Files</button>
        </div>

        <div class="tool-divider"></div>

        <!-- Design Assistant Section -->
        <div class="panel-section">
          <h4>Design Assistant</h4>
          <div id="assistant-chat" class="assistant-chat"></div>
          <div class="tool-row">
            <input type="text" id="assistant-input" placeholder="Ask about tools, materials, tips..." class="ai-input">
          </div>
          <div class="tool-row">
            <button id="assistant-send-btn" class="tool-btn-panel" style="width: 100%">üí¨ Ask</button>
          </div>
        </div>

        <div class="tool-divider"></div>

        <!-- Video Chat AI Section -->
        <div class="panel-section">
          <h4>üé• AI Video Chat</h4>
          <div class="tool-row">
            <button id="video-chat-start-btn" class="tool-btn-panel" style="width: 100%">üìπ Start Video Chat</button>
          </div>
          <p class="helper-text">Chat face-to-face with AI assistant</p>
        </div>
      </div>
    </div>

    <!-- Main Canvas Area -->
    <main id="canvas-container">
      <div id="rulers">
        <div id="ruler-horizontal"></div>
        <div id="ruler-vertical"></div>
      </div>
      <div id="canvas-wrapper">
        <canvas id="design-canvas"></canvas>
      </div>
      <div id="zoom-controls">
        <button id="zoom-out">‚àí</button>
        <span id="zoom-level">100%</span>
        <button id="zoom-in">+</button>
      </div>
    </main>

    <!-- Right Panel -->
    <aside id="properties-panel">
      <div class="panel-section">
        <h3>Layers</h3>
        <div id="layers-list">
          <div class="layer-item active">
            <span class="layer-visibility">üëÅ</span>
            <span class="layer-name">Layer 1</span>
            <span class="layer-lock">üîì</span>
          </div>
        </div>
        <div class="layer-controls">
          <button id="add-layer" title="Add Layer">+</button>
          <button id="delete-layer" title="Delete Layer">‚àí</button>
        </div>
      </div>

      <div class="panel-section">
        <h3>Transform</h3>
        <div class="property-row">
          <label>X:</label>
          <input type="number" id="prop-x" value="0">
          <label>Y:</label>
          <input type="number" id="prop-y" value="0">
        </div>
        <div class="property-row">
          <label>W:</label>
          <input type="number" id="prop-width" value="0">
          <label>H:</label>
          <input type="number" id="prop-height" value="0">
        </div>
        <div class="property-row">
          <label>Rotation:</label>
          <input type="number" id="prop-rotation" value="0">
          <span>¬∞</span>
        </div>
      </div>

      <div class="panel-section">
        <h3>Fill & Stroke</h3>
        <div class="property-row">
          <label>Fill:</label>
          <input type="color" id="prop-fill" value="#3498db">
          <button id="no-fill">‚àÖ</button>
        </div>
        <div class="property-row">
          <label>Stroke:</label>
          <input type="color" id="prop-stroke" value="#000000">
          <input type="number" id="stroke-width" value="1" min="0" step="0.5">
        </div>
      </div>

      <div class="panel-section">
        <h3>Operations</h3>
        <div class="operation-buttons">
          <button class="op-btn" data-op="weld" title="Weld shapes together">Weld</button>
          <button class="op-btn" data-op="slice" title="Slice shapes">Slice</button>
          <button class="op-btn" data-op="attach" title="Attach shapes">Attach</button>
          <button class="op-btn" data-op="flatten" title="Flatten to print">Flatten</button>
          <button class="op-btn" data-op="contour" title="Add contour">Contour</button>
          <button class="op-btn" data-op="offset" title="Offset path">Offset</button>
        </div>
      </div>

      <div class="panel-section">
        <h3>Cut Settings</h3>
        <div class="property-row">
          <label>Material:</label>
          <select id="material-select">
            <option value="vinyl">Vinyl</option>
            <option value="cardstock">Cardstock</option>
            <option value="cardstock-heavy">Heavy Cardstock</option>
            <option value="paper">Paper</option>
            <option value="iron-on">Iron-On</option>
            <option value="fabric">Fabric</option>
            <option value="faux-leather">Faux Leather</option>
            <option value="sticker-paper">Sticker Paper</option>
            <option value="vellum">Vellum</option>
            <option value="custom">Custom</option>
          </select>
        </div>
        <div class="property-row">
          <label>Pressure:</label>
          <input type="range" id="cut-pressure" min="1" max="10" value="5">
          <span id="pressure-value">5</span>
        </div>
        <div class="property-row">
          <label>Speed:</label>
          <input type="range" id="cut-speed" min="1" max="10" value="4">
          <span id="speed-value">4</span>
        </div>
        <div class="property-row">
          <label>Multi-Cut:</label>
          <input type="number" id="multi-cut" min="1" max="5" value="1">
        </div>
      </div>

      <div class="panel-section">
        <h3>Device</h3>
        <div id="device-status" class="device-status disconnected">
          <span class="status-indicator"></span>
          <span id="device-name">No device connected</span>
        </div>
        <div class="device-controls">
          <button id="scan-devices-btn" class="device-btn">Scan</button>
          <button id="connect-device-btn" class="device-btn" disabled>Connect</button>
        </div>
        <select id="device-list" class="device-select" style="display: none;">
          <option value="">Select a device...</option>
        </select>
        <button id="send-cut-btn" class="send-cut-btn" disabled>Send to Cutter</button>
        <div id="cut-progress" class="cut-progress" style="display: none;">
          <div class="progress-bar"><div class="progress-fill"></div></div>
          <span class="progress-text">0%</span>
        </div>
      </div>
    </aside>

    <!-- Right Slide-Out Drawer (All Tools) -->
    <div id="right-drawer" class="right-drawer" aria-hidden="true" inert>
      <div class="right-drawer-header">
        <h3>Tools & Settings</h3>
        <button id="close-right-drawer" class="close-btn">√ó</button>
      </div>
      <div id="right-drawer-content" class="right-drawer-content">
        <!-- Shape Tools -->
        <div class="drawer-section">
          <h4>Shapes</h4>
          <div class="tool-grid">
            <button class="tool-btn-grid" data-tool="rectangle" title="Rectangle (R)">
              <span class="icon">‚ñ≠</span><span class="label">Rectangle</span>
            </button>
            <button class="tool-btn-grid" data-tool="circle" title="Circle (C)">
              <span class="icon">‚óØ</span><span class="label">Circle</span>
            </button>
            <button class="tool-btn-grid" data-tool="polygon" title="Polygon">
              <span class="icon">‚¨°</span><span class="label">Polygon</span>
            </button>
            <button class="tool-btn-grid" data-tool="star" title="Star">
              <span class="icon">‚òÖ</span><span class="label">Star</span>
            </button>
            <button class="tool-btn-grid" data-tool="line" title="Line (L)">
              <span class="icon">‚ï±</span><span class="label">Line</span>
            </button>
          </div>
        </div>

        <!-- Edit Tools -->
        <div class="drawer-section">
          <h4>Edit</h4>
          <div class="tool-grid">
            <button class="tool-btn-grid" data-tool="duplicate" title="Duplicate (Ctrl+D)">
              <span class="icon">‚äï</span><span class="label">Duplicate</span>
            </button>
            <button class="tool-btn-grid" data-tool="group" title="Group (Ctrl+G)">
              <span class="icon">‚äû</span><span class="label">Group</span>
            </button>
            <button class="tool-btn-grid" data-tool="ungroup" title="Ungroup (Ctrl+Shift+G)">
              <span class="icon">‚äü</span><span class="label">Ungroup</span>
            </button>
            <button class="tool-btn-grid" data-tool="flip-h" title="Flip Horizontal">
              <span class="icon">‚áÑ</span><span class="label">Flip H</span>
            </button>
            <button class="tool-btn-grid" data-tool="flip-v" title="Flip Vertical">
              <span class="icon">‚áÖ</span><span class="label">Flip V</span>
            </button>
            <button class="tool-btn-grid" data-tool="rotate-90" title="Rotate 90¬∞">
              <span class="icon">‚Üª</span><span class="label">Rotate 90¬∞</span>
            </button>
          </div>
        </div>

        <!-- Alignment Tools -->
        <div class="drawer-section">
          <h4>Alignment</h4>
          <div class="tool-grid">
            <button class="tool-btn-grid" data-tool="align-left" title="Align Left">
              <span class="icon">‚´∑</span><span class="label">Left</span>
            </button>
            <button class="tool-btn-grid" data-tool="align-center" title="Align Center">
              <span class="icon">‚´º</span><span class="label">Center</span>
            </button>
            <button class="tool-btn-grid" data-tool="align-right" title="Align Right">
              <span class="icon">‚´∏</span><span class="label">Right</span>
            </button>
            <button class="tool-btn-grid" data-tool="offset" title="Offset Path">
              <span class="icon">‚äö</span><span class="label">Offset</span>
            </button>
            <button class="tool-btn-grid" data-tool="contour" title="Contour">
              <span class="icon">‚óé</span><span class="label">Contour</span>
            </button>
          </div>
        </div>

        <!-- Path Operations -->
        <div class="drawer-section">
          <h4>Path Operations</h4>
          <div class="tool-grid">
            <button class="tool-btn-grid" data-tool="bezier-editor" title="Bezier Curve Editor">
              <span class="icon">‚úé</span><span class="label">Bezier</span>
            </button>
            <button class="tool-btn-grid" data-tool="path-simplify" title="Simplify Path">
              <span class="icon">‚åÑ</span><span class="label">Simplify</span>
            </button>
            <button class="tool-btn-grid" data-tool="path-union" title="Union Paths">
              <span class="icon">‚äî</span><span class="label">Union</span>
            </button>
            <button class="tool-btn-grid" data-tool="path-subtract" title="Subtract Paths">
              <span class="icon">‚äñ</span><span class="label">Subtract</span>
            </button>
            <button class="tool-btn-grid" data-tool="path-intersect" title="Intersect Paths">
              <span class="icon">‚à©</span><span class="label">Intersect</span>
            </button>
            <button class="tool-btn-grid" data-tool="create-outline" title="Create Outline">
              <span class="icon">‚óª</span><span class="label">Outline</span>
            </button>
            <button class="tool-btn-grid" data-tool="merge-paths" title="Merge Paths">
              <span class="icon">‚ü∑</span><span class="label">Merge</span>
            </button>
            <button class="tool-btn-grid" data-tool="break-apart" title="Break Apart">
              <span class="icon">‚úï</span><span class="label">Break Apart</span>
            </button>
          </div>
        </div>

        <!-- Text Tools -->
        <div class="drawer-section">
          <h4>Text Tools</h4>
          <div class="tool-grid">
            <button class="tool-btn-grid" data-tool="font-manager" title="Font Manager">
              <span class="icon">üî§</span><span class="label">Fonts</span>
            </button>
            <button class="tool-btn-grid" data-tool="text-on-path" title="Text on Path">
              <span class="icon">‚Ü∑</span><span class="label">On Path</span>
            </button>
            <button class="tool-btn-grid" data-tool="text-to-path" title="Text to Path">
              <span class="icon">‚àã</span><span class="label">To Path</span>
            </button>
            <button class="tool-btn-grid" data-tool="font-style" title="Font Styling">
              <span class="icon">ùêÄ</span><span class="label">Styling</span>
            </button>
            <button class="tool-btn-grid" data-tool="letter-spacing" title="Letter Spacing">
              <span class="icon">‚Üî</span><span class="label">Spacing</span>
            </button>
            <button class="tool-btn-grid" data-tool="text-overflow" title="Text Overflow">
              <span class="icon">‚äü</span><span class="label">Overflow</span>
            </button>
          </div>
        </div>

        <!-- Transform Tools -->
        <div class="drawer-section">
          <h4>Transform</h4>
          <div class="tool-grid">
            <button class="tool-btn-grid" data-tool="skew" title="Skew/Shear">
              <span class="icon">‚´∑‚´∏</span><span class="label">Skew</span>
            </button>
            <button class="tool-btn-grid" data-tool="perspective" title="Perspective Transform">
              <span class="icon">‚ñ®</span><span class="label">Perspective</span>
            </button>
            <button class="tool-btn-grid" data-tool="mirror-advanced" title="Mirror Advanced">
              <span class="icon">‚ü∑</span><span class="label">Mirror</span>
            </button>
            <button class="tool-btn-grid" data-tool="scale-constrain" title="Scale with Constraints">
              <span class="icon">‚Üî‚Üï</span><span class="label">Scale</span>
            </button>
            <button class="tool-btn-grid" data-tool="stretch" title="Stretch & Squeeze">
              <span class="icon">‚óä</span><span class="label">Stretch</span>
            </button>
            <button class="tool-btn-grid" data-tool="3d-rotation" title="3D Rotation Preview">
              <span class="icon">‚Ü∫</span><span class="label">3D</span>
            </button>
            <button class="tool-btn-grid" data-tool="corner-adjust" title="Corner Adjustment">
              <span class="icon">‚®≠</span><span class="label">Corners</span>
            </button>
          </div>
        </div>

        <!-- Color & Fill -->
        <div class="drawer-section">
          <h4>Color & Fill</h4>
          <div class="tool-grid">
            <button class="tool-btn-grid" data-tool="gradient-editor" title="Gradient Editor">
              <span class="icon">‚ñ§</span><span class="label">Gradient</span>
            </button>
            <button class="tool-btn-grid" data-tool="pattern-fill" title="Pattern Fill Creator">
              <span class="icon">‚ñ¶</span><span class="label">Pattern</span>
            </button>
            <button class="tool-btn-grid" data-tool="color-harmony" title="Color Harmonies">
              <span class="icon">‚óâ</span><span class="label">Harmony</span>
            </button>
            <button class="tool-btn-grid" data-tool="opacity" title="Opacity/Alpha Channel">
              <span class="icon">‚óé</span><span class="label">Opacity</span>
            </button>
            <button class="tool-btn-grid" data-tool="cmyk-separation" title="Color Separation">
              <span class="icon">‚äô</span><span class="label">CMYK Sep</span>
            </button>
          </div>
        </div>

        <!-- Selection Tools -->
        <div class="drawer-section">
          <h4>Advanced Selection</h4>
          <div class="tool-grid">
            <button class="tool-btn-grid" data-tool="select-color" title="Select by Color">
              <span class="icon">üé®</span><span class="label">By Color</span>
            </button>
            <button class="tool-btn-grid" data-tool="select-size" title="Select by Size">
              <span class="icon">üìè</span><span class="label">By Size</span>
            </button>
            <button class="tool-btn-grid" data-tool="select-similar" title="Select Similar">
              <span class="icon">‚âà</span><span class="label">Similar</span>
            </button>
            <button class="tool-btn-grid" data-tool="select-inverse" title="Select Inverse">
              <span class="icon">‚äò</span><span class="label">Inverse</span>
            </button>
          </div>
        </div>

        <!-- SVG Optimization -->
        <div class="drawer-section">
          <h4>SVG Optimizer</h4>
          <div class="tool-grid">
            <button class="tool-btn-grid" data-tool="svg-optimize" title="Optimize Selected SVG">
              <span class="icon">‚ö°</span><span class="label">Optimize</span>
            </button>
            <button class="tool-btn-grid" data-tool="svg-simplify" title="Simplify Paths">
              <span class="icon">‚åÑ</span><span class="label">Simplify</span>
            </button>
            <button class="tool-btn-grid" data-tool="svg-clean" title="Clean SVG Code">
              <span class="icon">üßπ</span><span class="label">Clean</span>
            </button>
          </div>
        </div>

        <!-- Divider -->
        <hr style="border: none; border-top: 1px solid #333; margin: 20px 0;">

        <!-- Quick Properties -->
        <div class="drawer-section">
          <h4>Quick Properties</h4>
          <div class="property-quick">
            <p style="color: #888; font-size: 12px; margin: 10px 0;">Select an object to edit properties</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Image Trace Dialog -->
  <div id="trace-dialog" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Image Trace</h2>
        <button class="modal-close" id="close-trace-dialog">√ó</button>
      </div>
      <div class="modal-body">
        <div class="trace-preview">
          <div class="preview-original">
            <h4>Original</h4>
            <img id="trace-original" src="" alt="Original image">
          </div>
          <div class="preview-result">
            <h4>Traced</h4>
            <div id="trace-result"></div>
          </div>
        </div>
        <div class="trace-options">
          <div class="option-row">
            <label>Mode:</label>
            <select id="trace-mode">
              <option value="simple">Simple (Black/White)</option>
              <option value="posterize">Posterize (Multi-color)</option>
            </select>
          </div>
          <div class="option-row">
            <label>Threshold:</label>
            <input type="range" id="trace-threshold" min="0" max="255" value="128">
            <span id="threshold-value">128</span>
          </div>
          <div class="option-row" id="posterize-steps-row" style="display: none;">
            <label>Color Steps:</label>
            <input type="number" id="posterize-steps" min="2" max="8" value="4">
          </div>
          <div class="option-row">
            <label>Detail:</label>
            <select id="trace-detail">
              <option value="high">High</option>
              <option value="medium" selected>Medium</option>
              <option value="low">Low</option>
            </select>
          </div>
          <div class="option-row">
            <label><input type="checkbox" id="trace-invert"> Invert</label>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="trace-preview-btn" class="btn">Preview</button>
        <button id="trace-apply-btn" class="btn btn-primary">Apply</button>
      </div>
    </div>
  </div>

  <!-- Font Manager Dialog -->
  <div id="font-manager-dialog" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Font Manager</h2>
        <button class="modal-close" id="close-font-manager">√ó</button>
      </div>
      <div class="modal-body">
        <div class="font-manager-content">
          <div class="font-list">
            <h4>Available Fonts</h4>
            <div id="font-list-container" style="max-height: 300px; overflow-y: auto; border: 1px solid #444; padding: 10px;">
              <p style="color: #888;">Loading fonts...</p>
            </div>
          </div>
          <div class="font-preview">
            <h4>Preview</h4>
            <input type="text" id="font-preview-text" placeholder="Enter preview text" value="Sample Text" style="width: 100%; padding: 8px; margin-bottom: 10px;">
            <div id="font-preview" style="background: #1a1a1a; padding: 20px; border: 1px solid #444; min-height: 80px; color: #ccc;">Sample Text</div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="font-manager-close-btn" class="btn">Close</button>
      </div>
    </div>
  </div>

  <!-- Bezier Editor Dialog -->
  <div id="bezier-editor-dialog" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Bezier Curve Editor</h2>
        <button class="modal-close" id="close-bezier-editor">√ó</button>
      </div>
      <div class="modal-body">
        <div class="bezier-editor-content">
          <p style="color: #aaa; margin-bottom: 15px;">Select a path to edit its control points. Drag control points to adjust the curve.</p>
          <div style="border: 1px solid #444; padding: 10px; margin-bottom: 10px;">
            <label><input type="checkbox" id="bezier-show-handles"> Show handles</label>
            <label><input type="checkbox" id="bezier-show-points" checked> Show control points</label>
          </div>
          <div>
            <h4>Curve Type</h4>
            <select id="bezier-curve-type" style="width: 100%; padding: 8px;">
              <option value="cubic">Cubic Bezier</option>
              <option value="quadratic">Quadratic Bezier</option>
              <option value="straight">Straight Line</option>
            </select>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="bezier-reset-btn" class="btn">Reset</button>
        <button id="bezier-apply-btn" class="btn btn-primary">Apply</button>
      </div>
    </div>
  </div>

  <!-- Text on Path Dialog -->
  <div id="text-on-path-dialog" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Text on Path</h2>
        <button class="modal-close" id="close-text-on-path">√ó</button>
      </div>
      <div class="modal-body">
        <div class="text-on-path-content">
          <div class="option-row">
            <label>Text:</label>
            <input type="text" id="text-on-path-input" placeholder="Enter text" value="Sample Text">
          </div>
          <div class="option-row">
            <label>Font:</label>
            <select id="text-on-path-font">
              <option>Arial</option>
              <option>Helvetica</option>
              <option>Times New Roman</option>
            </select>
          </div>
          <div class="option-row">
            <label>Size:</label>
            <input type="number" id="text-on-path-size" value="16" min="1">
          </div>
          <div class="option-row">
            <label><input type="checkbox" id="text-on-path-reverse"> Reverse direction</label>
          </div>
          <div class="option-row">
            <label>Offset:</label>
            <input type="range" id="text-on-path-offset" min="-100" max="100" value="0">
            <span id="offset-value">0</span>%
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="text-on-path-preview-btn" class="btn">Preview</button>
        <button id="text-on-path-apply-btn" class="btn btn-primary">Apply</button>
      </div>
    </div>
  </div>

  <!-- Text to Path Dialog -->
  <div id="text-to-path-dialog" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Convert Text to Path</h2>
        <button class="modal-close" id="close-text-to-path">√ó</button>
      </div>
      <div class="modal-body">
        <div class="text-to-path-content">
          <p style="color: #aaa; margin-bottom: 15px;">This will convert the selected text object(s) into editable path(s). The text will no longer be editable as text.</p>
          <div style="border: 1px solid #444; padding: 10px;">
            <label><input type="checkbox" id="text-to-path-ungroup"> Ungroup letters</label>
            <label><input type="checkbox" id="text-to-path-remove-fill"> Remove fill (keep stroke)</label>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="text-to-path-cancel-btn" class="btn">Cancel</button>
        <button id="text-to-path-confirm-btn" class="btn btn-primary">Convert</button>
      </div>
    </div>
  </div>

  <!-- Color Vector Dialog -->
  <div id="color-vector-dialog" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Color Vector</h2>
        <button class="modal-close" id="close-color-vector">√ó</button>
      </div>
      <div class="modal-body">
        <div class="color-vector-content">
          <p style="color: #aaa; margin-bottom: 15px;">Click on a color in the image to trace it. Only that color will be vectorized.</p>
          <div style="border: 1px solid #444; padding: 15px; margin-bottom: 15px; text-align: center; min-height: 150px; display: flex; align-items: center; justify-content: center; background: #1a1a1a;">
            <canvas id="color-vector-canvas" style="max-width: 100%; max-height: 150px; cursor: crosshair;"></canvas>
          </div>
          <div style="border: 1px solid #666; padding: 10px; margin-bottom: 15px; border-radius: 4px;">
            <div style="display: flex; align-items: center; gap: 10px;">
              <span>Selected Color:</span>
              <div id="color-vector-preview" style="width: 40px; height: 40px; border: 1px solid #888; border-radius: 4px; background: #fff;"></div>
              <span id="color-vector-hex" style="color: #aaa; font-family: monospace;">#000000</span>
            </div>
          </div>
          <div class="option-row">
            <label>Trace Detail:</label>
            <select id="color-vector-detail">
              <option value="high">High</option>
              <option value="medium" selected>Medium</option>
              <option value="low">Low</option>
            </select>
          </div>
          <div class="option-row">
            <label><input type="checkbox" id="color-vector-smooth" checked> Smooth paths</label>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="color-vector-clear-btn" class="btn">Clear Selection</button>
        <button id="color-vector-apply-btn" class="btn btn-primary" disabled>Apply Vector</button>
      </div>
    </div>
  </div>

  <!-- Bottom Status Bar -->
  <footer id="status-bar">
    <span id="status-message">Ready</span>
    <span id="canvas-size">12" √ó 12"</span>
    <span id="selected-count">0 objects selected</span>
  </footer>

  <script src="license-ui.js"></script>
  <script src="app.js"></script>
</body>
</html>
